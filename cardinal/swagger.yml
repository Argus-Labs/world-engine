consumes:
    - application/json
info:
    description: Backend server for world engine
    title: Cardinal
    version: 0.0.1
produces:
    - application/json
schemes:
    - http
swagger: "2.0"

paths:
    /tx/{transactionType}:
        post:
            tags:
                - transaction
            summary: Submit a transaction to Cardinal
            description: Submit a transaction to Cardinal
            operationId: transaction
            consumes:
                - application/json
            produces:
                - application/json
            parameters:
                - name: transactionType
                  in: path
                  description: label of the transaction that wants to be submitted
                  required: true
                  type: string
                - name: transactionBody
                  in: body
                  description: Transaction details
                  required: true
                  schema:
                      $ref: '#/definitions/TransactionRequest'
            responses:
                '200':
                    description: successful operation
                    schema:
                        $ref: '#/definitions/TransactionReply'
                '400':
                    description: Invalid transaction request
    /read/{readType}:
        get:
            tags:
                - read
            summary: Read some data from Cardinal
            description: Read some data from Cardinal
            consumes:
                - application/json
            produces:
                - application/json
            operationId: read
            parameters:
                - name: readType
                  in: path
                  description: The read type
                  required: true
                  type: string
                - name: readBody
                  required: true
                  in: body
                  schema: {}
            responses:
                '200':
                    description: read response
                    schema: {}
                '400':
                    description: Invalid read request
    /transaction-receipts:
        get:
            tags:
                - receipts
            summary: Get transaction receipts from Cardinal
            description: Get transaction receipts from Cardinal
            consumes:
                - application/json
            produces:
                - application/json
            operationId: receipts
            parameters:
                - name: receiptRequestBody
                  required: true
                  in: body
                  schema:
                      $ref: '#/definitions/ReceiptsRequest'
            responses:
                '200':
                    description: successful operation
                    schema:
                        $ref: '#/definitions/ReceiptsReply'
                '400':
                    description: Invalid transaction request

definitions:
    TransactionReply:
        required:
            - tx_hash
            - tick
        type: object
        properties:
            tx_hash:
                type: string
            tick:
                type: integer
                format: int64
    TransactionRequest:
        required:
            - personaTag
            - namespace
            - nonce
            - signature
            - body
        type: object
        properties:
            personaTag:
                type: string
                example: CoolMage
            namespace:
                type: string
                example: agar-shooter
            nonce:
                type: integer
                format: int64
            signature:
                type: string
            body:
                type: object
    ReceiptsRequest:
        required:
            - start_tick
        type: object
        properties:
            start_tick:
                type: integer
                format: int64
    ReceiptsReply:
        required:
            - start_tick
            - end_tick
            - receipts
        type: object
        properties:
            start_tick:
                type: integer
                format: int64
            end_tick:
                type: integer
                format: int64
            receipts:
                type: array
                items:
                    $ref: '#/definitions/Receipts'
    Receipts:
        required:
            - tx_hash
            - tick
            - result
            - errors
        type: object
        properties:
            tx_hash:
                type: string
            tick:
                type: integer
            result: {}
            errors:
                type: array
                items:
                    type: string